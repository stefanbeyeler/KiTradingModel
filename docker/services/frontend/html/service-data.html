<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Service - Service Dokumentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e8e8e8;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 0;
            margin-bottom: 2rem;
        }

        header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: #64c8ff;
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .back-link:hover {
            color: #fff;
        }

        h1 {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .service-badge {
            background: rgba(76, 175, 80, 0.2);
            color: #81c784;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .subtitle {
            opacity: 0.7;
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }

        .content-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 1.5rem;
        }

        .content-card h2 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: #64c8ff;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .content-card p {
            line-height: 1.7;
            margin-bottom: 1rem;
            opacity: 0.9;
        }

        .content-card ul {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        .content-card li {
            line-height: 1.8;
            margin-bottom: 0.5rem;
        }

        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .tech-tag {
            background: rgba(167, 139, 250, 0.2);
            color: #a78bfa;
            padding: 0.4rem 0.8rem;
            border-radius: 6px;
            font-size: 0.85rem;
            border: 1px solid rgba(167, 139, 250, 0.3);
        }

        .endpoint-list {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .endpoint {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .endpoint:last-child {
            border-bottom: none;
        }

        .method {
            background: rgba(76, 175, 80, 0.2);
            color: #81c784;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            min-width: 50px;
            text-align: center;
        }

        .method.post {
            background: rgba(33, 150, 243, 0.2);
            color: #64b5f6;
        }

        .method.put {
            background: rgba(255, 152, 0, 0.2);
            color: #ffb74d;
        }

        .method.delete {
            background: rgba(244, 67, 54, 0.2);
            color: #e57373;
        }

        .endpoint-path {
            font-family: 'Consolas', 'Monaco', monospace;
            color: #ffd54f;
        }

        .endpoint-desc {
            opacity: 0.7;
            font-size: 0.85rem;
            margin-left: auto;
        }

        .info-box {
            background: rgba(100, 200, 255, 0.1);
            border-left: 3px solid #64c8ff;
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
        }

        .info-box.warning {
            background: rgba(255, 193, 7, 0.1);
            border-left-color: #ffc107;
        }

        .quick-links {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1.5rem;
        }

        .quick-links a {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: rgba(100, 200, 255, 0.1);
            color: #64c8ff;
            border-radius: 8px;
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.2s;
            border: 1px solid rgba(100, 200, 255, 0.2);
        }

        .quick-links a:hover {
            background: rgba(100, 200, 255, 0.2);
            transform: translateY(-2px);
        }

        footer {
            text-align: center;
            padding: 2rem;
            opacity: 0.5;
            font-size: 0.8rem;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }

        @media (max-width: 600px) {
            .feature-grid {
                grid-template-columns: 1fr;
            }
        }

        .feature-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 1rem;
            border-radius: 8px;
            border-left: 3px solid #a78bfa;
        }

        .feature-item h4 {
            color: #a78bfa;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .feature-item p {
            font-size: 0.85rem;
            opacity: 0.8;
            margin-bottom: 0;
        }

        /* Architecture Diagram Styles */
        .architecture-diagram {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.8rem;
            line-height: 1.4;
            overflow-x: auto;
        }

        .arch-row {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0.5rem 0;
        }

        .arch-box {
            padding: 0.6rem 1rem;
            border-radius: 8px;
            text-align: center;
            min-width: 120px;
            font-weight: 500;
        }

        .arch-box.external {
            background: rgba(255, 152, 0, 0.2);
            border: 2px solid rgba(255, 152, 0, 0.5);
            color: #ffb74d;
        }

        .arch-box.service {
            background: rgba(33, 150, 243, 0.2);
            border: 2px solid rgba(33, 150, 243, 0.5);
            color: #64b5f6;
        }

        .arch-box.cache {
            background: rgba(244, 67, 54, 0.2);
            border: 2px solid rgba(244, 67, 54, 0.5);
            color: #e57373;
        }

        .arch-box.db {
            background: rgba(76, 175, 80, 0.2);
            border: 2px solid rgba(76, 175, 80, 0.5);
            color: #81c784;
        }

        .arch-box.ml {
            background: rgba(156, 39, 176, 0.2);
            border: 2px solid rgba(156, 39, 176, 0.5);
            color: #ba68c8;
        }

        .arch-arrow {
            color: #64c8ff;
            font-size: 1.2rem;
            margin: 0 0.5rem;
        }

        .arch-arrow.down {
            display: block;
            text-align: center;
            margin: 0.3rem 0;
        }

        .arch-label {
            font-size: 0.7rem;
            opacity: 0.7;
            margin-top: 0.2rem;
        }

        .arch-services-row {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin: 0.5rem 0;
        }

        .arch-box.small {
            min-width: 80px;
            padding: 0.4rem 0.6rem;
            font-size: 0.75rem;
        }

        .storage-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .storage-card {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 1rem;
        }

        .storage-card h4 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
            font-size: 1rem;
        }

        .storage-card.redis h4 {
            color: #e57373;
        }

        .storage-card.postgres h4 {
            color: #81c784;
        }

        .storage-table {
            width: 100%;
            font-size: 0.8rem;
        }

        .storage-table td {
            padding: 0.3rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .storage-table td:first-child {
            opacity: 0.7;
            width: 40%;
        }

        .storage-table tr:last-child td {
            border-bottom: none;
        }

        @media (max-width: 700px) {
            .storage-grid {
                grid-template-columns: 1fr;
            }
            .arch-services-row {
                gap: 0.3rem;
            }
            .arch-box.small {
                min-width: 60px;
                font-size: 0.65rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <a href="/" class="back-link">&#8592; Zurück zum Dashboard</a>
            <span class="service-badge">Port 3001</span>
        </div>
    </header>

    <div class="container">
        <h1>Data Service</h1>
        <p class="subtitle">Zentrales Daten-Gateway mit Symbol-Management, Pattern Detection und Multi-Source Integration</p>

        <div class="content-card">
            <h2>&#128202; Beschreibung</h2>
            <p>
                Der Data Service ist das <strong>zentrale Daten-Gateway</strong> des KI Trading Model Systems.
                Er fungiert als einziger Vermittler zwischen externen Datenquellen und allen internen Services
                (NHITS, TCN, HMM, RAG, LLM) und stellt eine einheitliche Schnittstelle für Marktdaten bereit.
            </p>
            <p>
                Der Service implementiert eine <strong>Multi-Source Fallback-Hierarchie</strong>:
                TwelveData (primär) → EasyInsight (1. Fallback) → Yahoo Finance (2. Fallback).
                Zusätzlich bietet er Symbol-Management, Indicator-Berechnungen und Trading-Strategien.
            </p>
        </div>

        <div class="content-card">
            <h2>&#128421; Datenfluss-Architektur</h2>
            <p>
                Der Data Service implementiert eine <strong>3-Layer-Caching-Architektur</strong> für optimale
                Performance und Datenverfügbarkeit. Anfragen durchlaufen die Layer in folgender Reihenfolge:
            </p>

            <div class="architecture-diagram">
                <!-- External APIs Row -->
                <div class="arch-row">
                    <div class="arch-box external">
                        TwelveData
                        <div class="arch-label">OHLCV, Indikatoren</div>
                    </div>
                    <div class="arch-box external">
                        EasyInsight
                        <div class="arch-label">MT5 Integration</div>
                    </div>
                    <div class="arch-box external">
                        Yahoo Finance
                        <div class="arch-label">Fallback</div>
                    </div>
                </div>

                <div class="arch-arrow down">&#8595; Layer 3: Externe APIs (Fresh Data)</div>

                <!-- Data Service Row -->
                <div class="arch-row">
                    <div class="arch-box service" style="min-width: 300px;">
                        <strong>DATA SERVICE</strong>
                        <div class="arch-label">Port 3001 - Zentrales Gateway</div>
                    </div>
                </div>

                <div class="arch-arrow down">&#8595; &#8593;</div>

                <!-- Storage Row -->
                <div class="arch-row">
                    <div class="arch-box cache">
                        Redis Cache
                        <div class="arch-label">Layer 1: Hot Data (TTL)</div>
                    </div>
                    <span class="arch-arrow">&#8596;</span>
                    <div class="arch-box db">
                        TimescaleDB
                        <div class="arch-label">Layer 2: Persistent</div>
                    </div>
                </div>

                <div class="arch-arrow down">&#8595; Daten-Bereitstellung</div>

                <!-- ML Services Row -->
                <div class="arch-services-row">
                    <div class="arch-box ml small">NHITS :3002</div>
                    <div class="arch-box ml small">TCN :3003</div>
                    <div class="arch-box ml small">HMM :3004</div>
                    <div class="arch-box ml small">Embedder :3005</div>
                    <div class="arch-box ml small">RAG :3008</div>
                    <div class="arch-box ml small">LLM :3009</div>
                </div>
            </div>

            <div class="info-box">
                <strong>Datenfluss:</strong> Anfragen werden zuerst im Redis-Cache geprüft (Layer 1).
                Bei Cache-Miss wird TimescaleDB abgefragt (Layer 2). Nur wenn beide leer sind,
                werden externe APIs kontaktiert (Layer 3) und die Daten in allen Layern gespeichert.
            </div>
        </div>

        <div class="content-card">
            <h2>&#128451; Datenspeicherung</h2>
            <p>
                Alle Marktdaten werden persistent in <strong>TimescaleDB</strong> (PostgreSQL-Erweiterung für Zeitreihen)
                gespeichert und durch <strong>Redis</strong> als Hot-Cache beschleunigt.
            </p>

            <div class="storage-grid">
                <div class="storage-card redis">
                    <h4>&#9889; Redis Cache (Port 6379)</h4>
                    <table class="storage-table">
                        <tr><td>Typ</td><td>In-Memory Key-Value Store</td></tr>
                        <tr><td>Max Memory</td><td>512 MB (LRU Eviction)</td></tr>
                        <tr><td>Persistenz</td><td>AOF aktiviert</td></tr>
                        <tr><td>Zweck</td><td>Hot Data mit TTL</td></tr>
                    </table>
                    <h5 style="margin-top: 0.75rem; font-size: 0.85rem; opacity: 0.8;">Cache-Kategorien:</h5>
                    <table class="storage-table">
                        <tr><td>MARKET_DATA</td><td>60s TTL</td></tr>
                        <tr><td>OHLCV</td><td>60s - 6h (nach Timeframe)</td></tr>
                        <tr><td>INDICATORS</td><td>5 min TTL</td></tr>
                        <tr><td>SYMBOLS</td><td>1h TTL</td></tr>
                        <tr><td>SENTIMENT</td><td>15 min TTL</td></tr>
                        <tr><td>TRAINING</td><td>6h TTL</td></tr>
                    </table>
                </div>

                <div class="storage-card postgres">
                    <h4>&#128024; TimescaleDB (Port 5432)</h4>
                    <table class="storage-table">
                        <tr><td>Basis</td><td>PostgreSQL 16</td></tr>
                        <tr><td>Host</td><td>10.1.19.102</td></tr>
                        <tr><td>Datenbank</td><td>tradingdataservice</td></tr>
                        <tr><td>Zweck</td><td>Persistente Zeitreihen</td></tr>
                    </table>
                    <h5 style="margin-top: 0.75rem; font-size: 0.85rem; opacity: 0.8;">OHLCV-Tabellen (Hypertables):</h5>
                    <table class="storage-table">
                        <tr><td>ohlcv_m1, m5, m15, m30</td><td>Minuten-Kerzen</td></tr>
                        <tr><td>ohlcv_h1, h4</td><td>Stunden-Kerzen</td></tr>
                        <tr><td>ohlcv_d1, w1, mn</td><td>Tages/Wochen/Monats</td></tr>
                    </table>
                    <h5 style="margin-top: 0.75rem; font-size: 0.85rem; opacity: 0.8;">Indikator-Tabellen:</h5>
                    <table class="storage-table">
                        <tr><td>indicators_momentum</td><td>RSI, MACD, ADX, CCI</td></tr>
                        <tr><td>indicators_volatility</td><td>ATR, BBands, Keltner</td></tr>
                        <tr><td>indicators_ma</td><td>SMA, EMA, WMA, VWAP</td></tr>
                        <tr><td>indicators_volume</td><td>OBV, A/D, Chaikin</td></tr>
                        <tr><td>indicators_trend</td><td>Ichimoku, Supertrend</td></tr>
                    </table>
                </div>
            </div>
        </div>

        <div class="content-card">
            <h2>&#9881;&#65039; Funktionsweise</h2>
            <p>Der Service bietet folgende Hauptfunktionen:</p>

            <div class="feature-grid">
                <div class="feature-item">
                    <h4>&#128279; Symbol-Management</h4>
                    <p>Verwaltung der zu überwachenden Trading-Symbole mit Metadaten wie Exchange, Intervall und Status.</p>
                </div>
                <div class="feature-item">
                    <h4>&#128640; EasyInsight Integration</h4>
                    <p>Direkte Anbindung an die EasyInsight API zum Abrufen von OHLCV-Daten und Symbol-Informationen.</p>
                </div>
                <div class="feature-item">
                    <h4>&#128200; Trading-Strategien</h4>
                    <p>Erstellen, Speichern und Verwalten von Trading-Strategien mit Export/Import-Funktion.</p>
                </div>
                <div class="feature-item">
                    <h4>&#128259; Daten-Synchronisation</h4>
                    <p>Automatische Synchronisation von Marktdaten zwischen EasyInsight und lokalen Services.</p>
                </div>
                <div class="feature-item">
                    <h4>&#127760; Twelve Data API</h4>
                    <p>Zugriff auf globale Marktdaten: Aktien, Forex, Krypto, ETFs, Indizes und technische Indikatoren.</p>
                </div>
                <div class="feature-item">
                    <h4>&#128202; Technische Analyse</h4>
                    <p>Berechnung von Indikatoren wie SMA, EMA, RSI, MACD, Bollinger Bands über Twelve Data.</p>
                </div>
                <div class="feature-item">
                    <p>Gateway für RAG: Economic Calendar, Sentiment, On-Chain, Orderbook, Macro und mehr.</p>
                </div>
            </div>

            <div class="info-box">
                <strong>Architektur:</strong> Der Data Service ist das einzige Gateway für externe Daten.
                Alle anderen Services (NHITS, TCN, RAG, LLM) greifen ausschließlich über diesen Service auf Marktdaten zu.
            </div>
        </div>

        <div class="content-card">
            <h2>&#128279; Wichtige API-Endpunkte</h2>
            <p style="opacity: 0.7; margin-bottom: 1rem;">Der Data Service bietet über <strong>200 API-Endpoints</strong> in 18 Routern.</p>

            <h3 style="font-size: 1rem; margin: 1rem 0 0.5rem; opacity: 0.8;">System & Cache</h3>
            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/health</span>
                    <span class="endpoint-desc">Health Check aller Services</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/system/info</span>
                    <span class="endpoint-desc">System-Informationen</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/system/metrics</span>
                    <span class="endpoint-desc">CPU, Memory, GPU Metriken</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/cache/overview</span>
                    <span class="endpoint-desc">Cache-Übersicht mit Statistiken</span>
                </div>
                <div class="endpoint">
                    <span class="method delete">DEL</span>
                    <span class="endpoint-path">/api/v1/cache/category/{cat}</span>
                    <span class="endpoint-desc">Cache-Kategorie löschen</span>
                </div>
            </div>

            <h3 style="font-size: 1rem; margin: 1.5rem 0 0.5rem; opacity: 0.8;">Testing & Simulation (3 Endpoints)</h3>
            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/test-unhealthy</span>
                    <span class="endpoint-desc">Service für 5 Min als unhealthy markieren (Test)</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/test-unhealthy</span>
                    <span class="endpoint-desc">Test-Unhealthy-Status abfragen</span>
                </div>
                <div class="endpoint">
                    <span class="method delete">DEL</span>
                    <span class="endpoint-path">/api/v1/test-unhealthy</span>
                    <span class="endpoint-desc">Test-Unhealthy-Status zurücksetzen</span>
                </div>
            </div>

            <h3 style="font-size: 1rem; margin: 1.5rem 0 0.5rem; opacity: 0.8;">Symbol-Management (18 Endpoints)</h3>
            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/managed-symbols</span>
                    <span class="endpoint-desc">Alle verwalteten Symbole</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/managed-symbols/stats</span>
                    <span class="endpoint-desc">Symbol-Statistiken</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/managed-symbols/search</span>
                    <span class="endpoint-desc">Symbol-Suche</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/managed-symbols/live-data/{symbol}</span>
                    <span class="endpoint-desc">Live-Daten für Symbol</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/managed-symbols</span>
                    <span class="endpoint-desc">Symbol hinzufügen</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/managed-symbols/import</span>
                    <span class="endpoint-desc">Von TimescaleDB importieren</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/managed-symbols/{id}/favorite</span>
                    <span class="endpoint-desc">Favorit umschalten</span>
                </div>
            </div>

            <h3 style="font-size: 1rem; margin: 1.5rem 0 0.5rem; opacity: 0.8;">Forecast & Training (38+ Endpoints)</h3>
            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/forecast/{symbol}</span>
                    <span class="endpoint-desc">Prognose abrufen</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/forecast/models</span>
                    <span class="endpoint-desc">Trainierte Modelle</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/forecast/performance</span>
                    <span class="endpoint-desc">Modell-Performance</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/forecast/{symbol}/train</span>
                    <span class="endpoint-desc">Modell trainieren</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/forecast/train-all</span>
                    <span class="endpoint-desc">Alle Modelle trainieren</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/forecast/training/progress</span>
                    <span class="endpoint-desc">Trainingsfortschritt</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/forecast/evaluate</span>
                    <span class="endpoint-desc">Prognosen evaluieren</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/forecast/favorites/start</span>
                    <span class="endpoint-desc">Auto-Forecast Favoriten</span>
                </div>
            </div>

            <h3 style="font-size: 1rem; margin: 1.5rem 0 0.5rem; opacity: 0.8;">Pattern Detection (13 Endpoints)</h3>
            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/patterns/types</span>
                    <span class="endpoint-desc">Unterstützte Pattern-Typen</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/patterns/scan</span>
                    <span class="endpoint-desc">Pattern scannen</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/patterns/scan/{symbol}</span>
                    <span class="endpoint-desc">Pattern für Symbol</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/patterns/history</span>
                    <span class="endpoint-desc">Pattern-Historie</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/patterns/history/statistics</span>
                    <span class="endpoint-desc">Pattern-Statistiken</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/patterns/history/start-auto-scan</span>
                    <span class="endpoint-desc">Auto-Scan starten</span>
                </div>
            </div>

            <h3 style="font-size: 1rem; margin: 1.5rem 0 0.5rem; opacity: 0.8;">Twelve Data API (40 Endpoints)</h3>
            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/twelvedata/status</span>
                    <span class="endpoint-desc">API-Status und Verfügbarkeit</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/twelvedata/time_series/{symbol}</span>
                    <span class="endpoint-desc">Historische OHLCV-Daten</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/twelvedata/quote/{symbol}</span>
                    <span class="endpoint-desc">Echtzeit-Kursdaten</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/twelvedata/indicators/{symbol}</span>
                    <span class="endpoint-desc">Mehrere Indikatoren</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/twelvedata/analysis/{symbol}</span>
                    <span class="endpoint-desc">Komplette Analyse</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/twelvedata/usage</span>
                    <span class="endpoint-desc">API-Verbrauch</span>
                </div>
            </div>

            <h3 style="font-size: 1rem; margin: 1.5rem 0 0.5rem; opacity: 0.8;">EasyInsight API</h3>
            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/easyinsight/status</span>
                    <span class="endpoint-desc">API-Verbindungsstatus</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/easyinsight/symbols</span>
                    <span class="endpoint-desc">Alle verfügbaren Symbole</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/easyinsight/ohlcv/{symbol}</span>
                    <span class="endpoint-desc">OHLCV-Daten aus TimescaleDB</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/easyinsight/indicators/{symbol}</span>
                    <span class="endpoint-desc">EasyInsight Indikatoren</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/easyinsight/timeframes</span>
                    <span class="endpoint-desc">Unterstützte Timeframes</span>
                </div>
            </div>

            <h3 style="font-size: 1rem; margin: 1.5rem 0 0.5rem; opacity: 0.8;">Backup & Config</h3>
            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/backup/status</span>
                    <span class="endpoint-desc">Backup-Status</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/backup/models</span>
                    <span class="endpoint-desc">Modelle sichern</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/restore/models</span>
                    <span class="endpoint-desc">Modelle wiederherstellen</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/config/timezone</span>
                    <span class="endpoint-desc">Zeitzone-Konfiguration</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/config/export</span>
                    <span class="endpoint-desc">Konfiguration exportieren</span>
                </div>
            </div>
        </div>

        <div class="content-card">
            <h2>&#128230; Datenmodelle</h2>
            <p>Die wichtigsten Datenstrukturen:</p>
            <ul>
                <li><strong>ManagedSymbol:</strong> Symbol, Exchange, Intervall, Status, Erstellungsdatum</li>
                <li><strong>Strategy:</strong> Name, Beschreibung, Regeln, Parameter, Backtest-Ergebnisse</li>
                <li><strong>SyncStatus:</strong> Status, letzter Sync, nachster Sync, Fehlerlog</li>
                <li><strong>OHLCV:</strong> Timestamp, Open, High, Low, Close, Volume (pro Timeframe-Tabelle)</li>
                <li><strong>Indicators:</strong> Momentum, Volatility, MA, Volume, Trend (optimierte Tabellen)</li>
            </ul>
        </div>

        <div class="content-card">
            <h2>&#128640; Cache-Strategien</h2>
            <p>
                Der Redis-Cache verwendet <strong>timeframe-spezifische TTLs</strong> für optimale Frische:
            </p>

            <div class="feature-grid">
                <div class="feature-item">
                    <h4>&#128337; MARKET_DATA (60s)</h4>
                    <p>Echtzeit-Kurse, schnelle Updates</p>
                </div>
                <div class="feature-item">
                    <h4>&#128200; OHLCV (5min)</h4>
                    <p>Kerzendaten für Charts</p>
                </div>
                <div class="feature-item">
                    <h4>&#128202; INDICATORS (5min)</h4>
                    <p>RSI, MACD, Bollinger Bands etc.</p>
                </div>
                <div class="feature-item">
                    <h4>&#128279; SYMBOLS (1h)</h4>
                    <p>Symbol-Listen und Metadaten</p>
                </div>
                <div class="feature-item">
                    <h4>&#128176; SENTIMENT (15min)</h4>
                    <p>Fear & Greed, Social Media</p>
                </div>
                <div class="feature-item">
                    <h4>&#127968; TRAINING (6h)</h4>
                    <p>Training-Daten für ML-Services</p>
                </div>
            </div>

            <h3 style="font-size: 1rem; margin: 1.5rem 0 0.5rem; opacity: 0.8;">Cache-Endpunkte</h3>
            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/cache/overview</span>
                    <span class="endpoint-desc">Cache-Übersicht mit Statistiken</span>
                </div>
                <div class="endpoint">
                    <span class="method delete">POST</span>
                    <span class="endpoint-path">/api/v1/cache/category/{category}</span>
                    <span class="endpoint-desc">Cache-Kategorie löschen</span>
                </div>
            </div>

            <div class="info-box">
                <strong>Architektur:</strong> Redis läuft auf Port 6379 mit 512MB maxmemory und LRU-Eviction.
                Alle Services nutzen den gemeinsamen Cache über den Data Service als Gateway.
            </div>
        </div>

        <div class="content-card">
            <h2>&#127760; Twelve Data API</h2>
            <p>
                Die Twelve Data API bietet Zugriff auf globale Finanzmarktdaten für über 125.000 Instrumente
                aus Aktien, Forex, Kryptowahrungen, ETFs und Indizes. Die Integration ermöglicht:
            </p>
            <ul>
                <li><strong>Echtzeit-Kurse:</strong> Aktuelle Preise für Aktien, Forex und Krypto</li>
                <li><strong>Historische Daten:</strong> OHLCV-Zeitreihen in verschiedenen Intervallen (1min bis 1month)</li>
                <li><strong>Symbol-Suche:</strong> Suche nach Instrumenten anhand von Name oder Ticker</li>
                <li><strong>Earnings Calendar:</strong> Übersicht über kommende Gewinnberichte</li>
            </ul>

            <h3 style="font-size: 1rem; margin: 1.5rem 0 0.5rem; color: #a78bfa;">Technische Indikatoren</h3>
            <div class="feature-grid">
                <div class="feature-item">
                    <h4>Trend / Moving Averages</h4>
                    <p>SMA, EMA, WMA, DEMA, TEMA, KAMA, VWAP, Ichimoku, SAR, Supertrend</p>
                </div>
                <div class="feature-item">
                    <h4>Momentum</h4>
                    <p>RSI, MACD, Stochastic, Williams %R, CCI, ADX, Aroon, MFI, Connors RSI</p>
                </div>
                <div class="feature-item">
                    <h4>Volatilitat</h4>
                    <p>Bollinger Bands, ATR, NATR, Percent B</p>
                </div>
                <div class="feature-item">
                    <h4>Volumen</h4>
                    <p>OBV, Accumulation/Distribution, ADOSC</p>
                </div>
            </div>

            <h3 style="font-size: 1rem; margin: 1.5rem 0 0.5rem; color: #81c784;">Neue ML-Features</h3>
            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/twelvedata/vwap/{symbol}</span>
                    <span class="endpoint-desc">Volume Weighted Average Price</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/twelvedata/crsi/{symbol}</span>
                    <span class="endpoint-desc">Connors RSI (Mean-Reversion)</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/twelvedata/linearregslope/{symbol}</span>
                    <span class="endpoint-desc">Linear Regression Slope (Trendstarke)</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/twelvedata/ht_trendmode/{symbol}</span>
                    <span class="endpoint-desc">Hilbert Trend Mode (Trend vs Range)</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/twelvedata/percent_b/{symbol}</span>
                    <span class="endpoint-desc">Percent B (BBands normalisiert 0-1)</span>
                </div>
            </div>

            <div class="info-box">
                <strong>API-Limits:</strong> Der kostenlose Plan bietet 800 API-Aufrufe pro Tag.
                Der aktuelle Verbrauch kann über den /twelvedata/usage Endpoint abgefragt werden.
            </div>
        </div>

        <div class="content-card">
            <h2>&#127760; External Data Sources (RAG Gateway)</h2>
            <p>
                Gateway für externe Datenquellen, die vom RAG Service für Trading Intelligence verwendet werden.
            </p>

            <div class="feature-grid">
                <div class="feature-item">
                    <h4>Economic Calendar</h4>
                    <p>Fed, ECB, CPI, NFP, GDP Events</p>
                </div>
                <div class="feature-item">
                    <h4>Sentiment</h4>
                    <p>Fear & Greed, Social Media, VIX</p>
                </div>
                <div class="feature-item">
                    <h4>On-Chain</h4>
                    <p>Whale Alerts, Exchange Flows</p>
                </div>
                <div class="feature-item">
                    <h4>Macro</h4>
                    <p>DXY, Bond Yields, Korrelationen</p>
                </div>
            </div>

            <h3 style="font-size: 1rem; margin: 1.5rem 0 0.5rem; opacity: 0.8;">External Sources Endpunkte</h3>
            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/external-sources/economic-calendar</span>
                    <span class="endpoint-desc">Wirtschaftskalender</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/external-sources/sentiment</span>
                    <span class="endpoint-desc">Markt-Sentiment</span>
                </div>
                <div class="endpoint">
                    <span class="method delete">POST</span>
                    <span class="endpoint-path">/api/v1/external-sources/fetch-all</span>
                    <span class="endpoint-desc">Alle Quellen parallel</span>
                </div>
                <div class="endpoint">
                    <span class="method delete">POST</span>
                    <span class="endpoint-path">/api/v1/external-sources/trading-context/{symbol}</span>
                    <span class="endpoint-desc">Kompletter Trading-Kontext</span>
                </div>
            </div>
        </div>

        <div class="content-card">
            <h2>&#128640; Prefetch Service</h2>
            <p>
                Proaktives Pre-Loading von Marktdaten für optimierte Cache-Performance.
                Der Prefetch-Service lädt Daten im Hintergrund, bevor sie angefordert werden.
            </p>

            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/prefetch/status</span>
                    <span class="endpoint-desc">Prefetch-Status und Statistiken</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/prefetch/start</span>
                    <span class="endpoint-desc">Prefetch-Service starten</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/prefetch/stop</span>
                    <span class="endpoint-desc">Prefetch-Service stoppen</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/prefetch/run</span>
                    <span class="endpoint-desc">Manueller Prefetch-Durchlauf</span>
                </div>
            </div>
        </div>

        <div class="content-card">
            <h2>&#128202; Indicator Management</h2>
            <p>
                Verwaltung und Konfiguration aller technischen Indikatoren aus TwelveData und EasyInsight.
            </p>

            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/indicators</span>
                    <span class="endpoint-desc">Alle verfügbaren Indikatoren</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/indicators/categories</span>
                    <span class="endpoint-desc">Indikator-Kategorien</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/indicators/by-category/{category}</span>
                    <span class="endpoint-desc">Indikatoren nach Kategorie</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/indicators/{id}/toggle</span>
                    <span class="endpoint-desc">Indikator aktivieren/deaktivieren</span>
                </div>
            </div>
        </div>

        <div class="content-card">
            <h2>&#128200; Yahoo Finance API</h2>
            <p>
                Kostenlose Fallback-Datenquelle für historische Marktdaten ohne API-Limits.
            </p>

            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/yfinance/status</span>
                    <span class="endpoint-desc">API-Status</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/yfinance/quote/{symbol}</span>
                    <span class="endpoint-desc">Aktueller Kurs</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/yfinance/time-series/{symbol}</span>
                    <span class="endpoint-desc">Historische OHLCV-Daten</span>
                </div>
            </div>

            <div class="info-box">
                <strong>Fallback-Hierarchie:</strong> TwelveData → EasyInsight → Yahoo Finance
            </div>
        </div>

        <div class="content-card">
            <h2>&#127891; Training Data</h2>
            <p>
                Optimierte Daten-Endpunkte für ML-Service Training (NHITS, TCN, HMM).
            </p>

            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/training-data/{symbol}</span>
                    <span class="endpoint-desc">Training-Daten für Symbol</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/training-data/cache/stats</span>
                    <span class="endpoint-desc">Training-Cache Statistiken</span>
                </div>
                <div class="endpoint">
                    <span class="method delete">DEL</span>
                    <span class="endpoint-path">/api/v1/training-data/cache/expired</span>
                    <span class="endpoint-desc">Abgelaufene Einträge löschen</span>
                </div>
            </div>
        </div>

        <div class="content-card">
            <h2>&#128295; Technologie-Stack</h2>
            <div class="tech-stack">
                <span class="tech-tag">Python 3.11</span>
                <span class="tech-tag">FastAPI</span>
                <span class="tech-tag">Redis</span>
                <span class="tech-tag">TimescaleDB</span>
                <span class="tech-tag">asyncpg</span>
                <span class="tech-tag">Pydantic</span>
                <span class="tech-tag">httpx</span>
                <span class="tech-tag">uvicorn</span>
                <span class="tech-tag">twelvedata</span>
            </div>
        </div>

        <div class="content-card">
            <h2>&#128640; Schnellzugriff</h2>
            <div class="quick-links">
                <a href="/data/docs" target="_blank">&#128196; API Dokumentation</a>
                <a href="/data/health" target="_blank">&#128154; Health Check</a>
                <a href="/data/api/v1/managed-symbols" target="_blank">&#128279; Managed Symbols</a>
                <a href="/watchdog/api/v1/tests/run/service/data" target="_blank">&#129514; Tests ausfuhren</a>
                <a href="/" class="back-link">&#127968; Dashboard</a>
            </div>
        </div>
    </div>

    <footer>
        KI Trading Model - Service Dokumentation | Data Service
    </footer>
</body>
</html>
