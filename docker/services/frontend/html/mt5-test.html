<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>MT5 API Test</title>
    <style>
        body { font-family: sans-serif; background: #1a1a2e; color: #fff; padding: 2rem; }
        .status { padding: 1rem; margin: 1rem 0; border-radius: 8px; }
        .success { background: rgba(76, 175, 80, 0.3); }
        .error { background: rgba(244, 67, 54, 0.3); }
        .info { background: rgba(33, 150, 243, 0.3); }
        pre { background: #0d1525; padding: 1rem; border-radius: 8px; overflow-x: auto; }
        button { padding: 0.5rem 1rem; margin: 0.5rem; cursor: pointer; }
    </style>
</head>
<body>
    <h1>MT5 API Test</h1>

    <div id="status" class="status info">Bereit zum Testen...</div>

    <button onclick="testAPI()">API testen</button>
    <button onclick="location.reload()">Seite neu laden</button>

    <h2>Ergebnis:</h2>
    <pre id="result">Noch kein Test durchgef√ºhrt</pre>

    <script>
        const API_URL = '/easyinsight/api/logs?limit=5';

        function log(message, type = 'info') {
            const statusEl = document.getElementById('status');
            statusEl.textContent = message;
            statusEl.className = 'status ' + type;
            console.log(message);
        }

        async function testAPI() {
            log('Starte API-Test...', 'info');
            const resultEl = document.getElementById('result');

            try {
                log('Sende Anfrage an: ' + API_URL, 'info');

                const response = await fetch(API_URL);
                log('Antwort erhalten: HTTP ' + response.status, response.ok ? 'success' : 'error');

                const data = await response.json();
                log('Daten erfolgreich geladen: ' + (data.data ? data.data.length : 0) + ' Logs', 'success');

                resultEl.textContent = JSON.stringify(data, null, 2);

            } catch (error) {
                log('Fehler: ' + error.message, 'error');
                resultEl.textContent = 'Fehler: ' + error.message + '\n\nStack: ' + error.stack;
            }
        }

        // Automatisch beim Laden testen
        document.addEventListener('DOMContentLoaded', () => {
            log('Seite geladen, starte automatischen Test...', 'info');
            testAPI();
        });
    </script>
</body>
</html>
