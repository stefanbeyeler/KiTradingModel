<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NHITS Service - Service Dokumentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e8e8e8;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 0;
            margin-bottom: 2rem;
        }

        header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: #64c8ff;
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .back-link:hover {
            color: #fff;
        }

        h1 {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .service-badge {
            background: rgba(76, 175, 80, 0.2);
            color: #81c784;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .subtitle {
            opacity: 0.7;
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }

        .content-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 1.5rem;
        }

        .content-card h2 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: #64c8ff;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .content-card p {
            line-height: 1.7;
            margin-bottom: 1rem;
            opacity: 0.9;
        }

        .content-card ul {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        .content-card li {
            line-height: 1.8;
            margin-bottom: 0.5rem;
        }

        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .tech-tag {
            background: rgba(167, 139, 250, 0.2);
            color: #a78bfa;
            padding: 0.4rem 0.8rem;
            border-radius: 6px;
            font-size: 0.85rem;
            border: 1px solid rgba(167, 139, 250, 0.3);
        }

        .endpoint-list {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .endpoint {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .endpoint:last-child {
            border-bottom: none;
        }

        .method {
            background: rgba(76, 175, 80, 0.2);
            color: #81c784;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            min-width: 50px;
            text-align: center;
        }

        .method.post {
            background: rgba(33, 150, 243, 0.2);
            color: #64b5f6;
        }

        .endpoint-path {
            font-family: 'Consolas', 'Monaco', monospace;
            color: #ffd54f;
        }

        .endpoint-desc {
            opacity: 0.7;
            font-size: 0.85rem;
            margin-left: auto;
        }

        .info-box {
            background: rgba(100, 200, 255, 0.1);
            border-left: 3px solid #64c8ff;
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
        }

        .info-box.warning {
            background: rgba(255, 193, 7, 0.1);
            border-left-color: #ffc107;
        }

        .info-box.success {
            background: rgba(76, 175, 80, 0.1);
            border-left-color: #4caf50;
        }

        .quick-links {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1.5rem;
        }

        .quick-links a {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: rgba(100, 200, 255, 0.1);
            color: #64c8ff;
            border-radius: 8px;
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.2s;
            border: 1px solid rgba(100, 200, 255, 0.2);
        }

        .quick-links a:hover {
            background: rgba(100, 200, 255, 0.2);
            transform: translateY(-2px);
        }

        footer {
            text-align: center;
            padding: 2rem;
            opacity: 0.5;
            font-size: 0.8rem;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }

        @media (max-width: 600px) {
            .feature-grid {
                grid-template-columns: 1fr;
            }
        }

        .feature-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 1rem;
            border-radius: 8px;
            border-left: 3px solid #a78bfa;
        }

        .feature-item h4 {
            color: #a78bfa;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .feature-item p {
            font-size: 0.85rem;
            opacity: 0.8;
            margin-bottom: 0;
        }

        .timeframe-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .timeframe-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        .timeframe-item .tf-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: #64c8ff;
        }

        .timeframe-item .tf-desc {
            font-size: 0.75rem;
            opacity: 0.7;
            margin-top: 0.3rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <a href="/" class="back-link">&#8592; Zurück zum Dashboard</a>
            <span class="service-badge">Port 3002</span>
        </div>
    </header>

    <div class="container">
        <h1>NHITS Service</h1>
        <p class="subtitle">Neural Hierarchical Interpolation for Time Series - Preisprognosen und Modell-Training</p>

        <div class="content-card">
            <h2>&#129504; Beschreibung</h2>
            <p>
                Der NHITS Service ist das Herzstück des KI Trading Model Systems. Er implementiert das
                <strong>N-HiTS</strong> (Neural Hierarchical Interpolation for Time Series) Modell,
                ein State-of-the-Art Deep Learning Modell für Zeitreihenprognosen, das speziell für
                Finanzmarktdaten optimiert wurde.
            </p>
            <p>
                N-HiTS wurde 2022 von Cristian Challu et al. veröffentlicht und übertrifft klassische
                Modelle wie ARIMA, Prophet und sogar andere neuronale Netze in vielen Benchmarks.
                Es verwendet eine hierarchische Interpolation, um sowohl kurzfristige als auch
                langfristige Muster effizient zu erfassen.
            </p>
        </div>

        <div class="content-card">
            <h2>&#9881;&#65039; Funktionsweise</h2>
            <p>Der NHITS-Algorithmus funktioniert durch:</p>
            <ul>
                <li><strong>Multi-Rate Sampling:</strong> Verschiedene Zeitskalen werden parallel verarbeitet</li>
                <li><strong>Hierarchische Interpolation:</strong> Grobe Vorhersagen werden schrittweise verfeinert</li>
                <li><strong>Expressiveness Ratios:</strong> Jede Schicht fokussiert auf unterschiedliche Frequenzen</li>
                <li><strong>MaxPool-Downsampling:</strong> Effiziente Reduktion der Eingabesequenz-Lange</li>
            </ul>

            <div class="info-box success">
                <strong>GPU-Beschleunigung:</strong> Der Service nutzt NVIDIA CUDA für das Training und
                die Inferenz. Auf der Jetson Orin GPU können Modelle signifikant schneller trainiert werden
                als auf der CPU.
            </div>
        </div>

        <div class="content-card">
            <h2>&#128337; Multi-Timeframe Training</h2>
            <p>Der Service unterstützt Training für 6 verschiedene Zeitintervalle:</p>

            <div class="timeframe-grid" style="grid-template-columns: repeat(6, 1fr);">
                <div class="timeframe-item">
                    <div class="tf-name">M5</div>
                    <div class="tf-desc">5 Minuten</div>
                </div>
                <div class="timeframe-item">
                    <div class="tf-name">M15</div>
                    <div class="tf-desc">15 Minuten</div>
                </div>
                <div class="timeframe-item">
                    <div class="tf-name">H1</div>
                    <div class="tf-desc">1 Stunde</div>
                </div>
                <div class="timeframe-item">
                    <div class="tf-name">H4</div>
                    <div class="tf-desc">4 Stunden</div>
                </div>
                <div class="timeframe-item">
                    <div class="tf-name">D1</div>
                    <div class="tf-desc">1 Tag</div>
                </div>
                <div class="timeframe-item">
                    <div class="tf-name">W1</div>
                    <div class="tf-desc">1 Woche</div>
                </div>
            </div>

            <div class="info-box">
                <strong>Trainingsablauf:</strong> Beim Multi-Timeframe Training werden Modelle für alle
                ausgewählten Zeitrahmen trainiert. Der Fortschritt kann live im Dashboard verfolgt werden.
            </div>
        </div>

        <div class="content-card">
            <h2>&#128200; Prognose-Features</h2>

            <div class="feature-grid">
                <div class="feature-item">
                    <h4>&#128202; Punkt-Prognosen</h4>
                    <p>Konkrete Preisvorhersagen für die nächsten N Perioden basierend auf historischen Daten.</p>
                </div>
                <div class="feature-item">
                    <h4>&#128201; Konfidenzintervalle</h4>
                    <p>Unsicherheitsschatzungen zeigen die Bandbreite moglicher Preisentwicklungen.</p>
                </div>
                <div class="feature-item">
                    <h4>&#128640; Batch-Prognosen</h4>
                    <p>Effiziente Vorhersagen für mehrere Symbole gleichzeitig.</p>
                </div>
                <div class="feature-item">
                    <h4>&#128190; Modell-Persistenz</h4>
                    <p>Trainierte Modelle werden gespeichert und können wiederverwendet werden.</p>
                </div>
            </div>
        </div>

        <div class="content-card">
            <h2>&#128279; Wichtige API-Endpunkte</h2>
            <p style="opacity: 0.7; margin-bottom: 1rem;">Der NHITS Service bietet über <strong>50 API-Endpoints</strong> für Forecasting und Training.</p>

            <h3 style="font-size: 1rem; margin: 1rem 0 0.5rem; opacity: 0.8;">Prognosen</h3>
            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/forecast/{symbol}</span>
                    <span class="endpoint-desc">Prognose für ein Symbol</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/forecast/models</span>
                    <span class="endpoint-desc">Liste aller trainierten Modelle</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/forecast/models/by-timeframe</span>
                    <span class="endpoint-desc">Modelle nach Timeframe gruppiert</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/forecast/{symbol}/model</span>
                    <span class="endpoint-desc">Modell-Informationen</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/forecast/latest-per-model</span>
                    <span class="endpoint-desc">Letzte Prognosen pro Modell</span>
                </div>
            </div>

            <h3 style="font-size: 1rem; margin: 1.5rem 0 0.5rem; opacity: 0.8;">Training</h3>
            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/forecast/train-all</span>
                    <span class="endpoint-desc">Multi-Timeframe Training starten</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/forecast/{symbol}/train</span>
                    <span class="endpoint-desc">Einzelnes Symbol trainieren</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/forecast/training/progress</span>
                    <span class="endpoint-desc">Trainingsfortschritt abfragen</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/forecast/training/symbols</span>
                    <span class="endpoint-desc">Trainierbare Symbole</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/forecast/training/cancel</span>
                    <span class="endpoint-desc">Training abbrechen</span>
                </div>
            </div>

            <h3 style="font-size: 1rem; margin: 1.5rem 0 0.5rem; opacity: 0.8;">Evaluation & Auto-Forecast</h3>
            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/forecast/evaluate</span>
                    <span class="endpoint-desc">Prognosen evaluieren</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/forecast/performance</span>
                    <span class="endpoint-desc">Modell-Performance</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/forecast/retraining-needed</span>
                    <span class="endpoint-desc">Symbole für Retraining</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/forecast/favorites/start</span>
                    <span class="endpoint-desc">Auto-Forecast Favoriten starten</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/forecast/auto/daily/start</span>
                    <span class="endpoint-desc">Tägliche Auto-Prognose starten</span>
                </div>
            </div>

            <h3 style="font-size: 1rem; margin: 1.5rem 0 0.5rem; opacity: 0.8;">Backup & System</h3>
            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/backup/status</span>
                    <span class="endpoint-desc">Backup-Status</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/backup/models</span>
                    <span class="endpoint-desc">Modelle sichern</span>
                </div>
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/restore/models</span>
                    <span class="endpoint-desc">Modelle wiederherstellen</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/system/metrics</span>
                    <span class="endpoint-desc">CPU/GPU/Memory Metriken</span>
                </div>
            </div>

            <h3 style="font-size: 1rem; margin: 1.5rem 0 0.5rem; opacity: 0.8;">Testing & Simulation (3 Endpoints)</h3>
            <div class="endpoint-list">
                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="endpoint-path">/api/v1/test-unhealthy</span>
                    <span class="endpoint-desc">Service für 5 Min als unhealthy markieren (Test)</span>
                </div>
                <div class="endpoint">
                    <span class="method">GET</span>
                    <span class="endpoint-path">/api/v1/test-unhealthy</span>
                    <span class="endpoint-desc">Test-Unhealthy-Status abfragen</span>
                </div>
                <div class="endpoint">
                    <span class="method delete">DEL</span>
                    <span class="endpoint-path">/api/v1/test-unhealthy</span>
                    <span class="endpoint-desc">Test-Unhealthy-Status zurücksetzen</span>
                </div>
            </div>
        </div>

        <div class="content-card">
            <h2>&#128295; Technologie-Stack</h2>
            <div class="tech-stack">
                <span class="tech-tag">Python 3.11</span>
                <span class="tech-tag">PyTorch</span>
                <span class="tech-tag">NeuralForecast</span>
                <span class="tech-tag">FastAPI</span>
                <span class="tech-tag">CUDA</span>
                <span class="tech-tag">Pandas</span>
                <span class="tech-tag">NumPy</span>
            </div>
        </div>

        <div class="content-card">
            <h2>&#128230; Modell-Parameter</h2>
            <p>Die wichtigsten Hyperparameter des NHITS-Modells:</p>
            <ul>
                <li><strong>input_size:</strong> Anzahl historischer Datenpunkte als Input (z.B. 168 für wöchentliche Daten)</li>
                <li><strong>h (horizon):</strong> Prognosehorizont - wie viele Perioden vorhergesagt werden</li>
                <li><strong>n_pool_kernel_size:</strong> Kernel-Grössen für das MaxPooling in jeder Schicht</li>
                <li><strong>n_freq_downsample:</strong> Downsampling-Faktoren für jede Schicht</li>
                <li><strong>learning_rate:</strong> Lernrate für den Optimierer (Standard: 1e-3)</li>
                <li><strong>max_steps:</strong> Maximale Trainingsschritte pro Modell</li>
            </ul>

            <div class="info-box warning">
                <strong>Trainingszeit:</strong> Je nach GPU und Anzahl der Symbole kann das Training
                mehrere Stunden dauern. Der Fortschritt wird im Dashboard live angezeigt.
            </div>
        </div>

        <div class="content-card">
            <h2>&#128640; Schnellzugriff</h2>
            <div class="quick-links">
                <a href="/nhits/docs" target="_blank">&#128196; API Dokumentation</a>
                <a href="/nhits/health" target="_blank">&#128154; Health Check</a>
                <a href="/" class="back-link">&#127968; Dashboard</a>
            </div>
        </div>
    </div>

    <footer>
        KI Trading Model - Service Dokumentation | NHITS Service
    </footer>
</body>
</html>
